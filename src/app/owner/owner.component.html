<div class="container-fluid p-0">
    <nav class="navbar navbar-expand-sm bg-primary navbar-dark">
        <div class="container-fluid">
            <a href="/" class="navbar-brand">
                <b>Garden Imagination</b>
            </a>
            <ul class="navbar-nav">
                <li class="nav-item"><a href="/owner" class="nav-link active">Profile</a></li>
                <li class="nav-item"><a href="/owner-firms" class="nav-link">Firms</a></li>
                <li class="nav-item"><a href="/owner-appointments" class="nav-link">Appointments</a></li>
                <li class="nav-item"><a href="/owner-maintenance" class="nav-link">Maintenance</a></li>
                <li class="nav-item"><button type="button" class="btn btn-outline-light" (click)="logout()">Logout</button></li>
            </ul>
        </div>
    </nav>

    <main class="container mt-4 d-flex justify-content-center">
        <div class="card mb-4" style="width: 30rem">
            <img *ngIf="!owner.profilePicture" src="assets/default_profile_picture.png" alt="Profile Picture" class="card-imt-top">
            <img *ngIf="owner.profilePicture" [src]="profilePicturesURL + owner.profilePicture" alt="Profile Picture" class="card-imt-top">
            <div class="card-body">
                <h4 class="card-title">{{ owner.firstname }} {{ owner.lastname }}</h4>
                <p>Address: {{ owner.address }}</p>
                <p>Email: {{ owner.email }}</p>
                <p>Phone Number: {{ owner.contact }}</p>
                <p>Credit Card Number: {{ owner.creditCard }}</p>
            </div>
        </div>

        <div class="container mt-4">
            <h2 class="text-center">Change Info</h2>
            <div class="table-responsive d-flex justify-content-center">
                <table class="table table-striped table-bordered w-75">
                    <tbody>
                        <tr>
                            <th>First Name</th>
                            <td>
                                <div class="d-flex justify-content-center align-items-center flex-column">
                                    <input type="text" class="form-control form-control-sm mb-2" [(ngModel)]="newFirstname">
                                </div>
                            </td>
                            <td>
                                <div class="d-flex justify-content-center align-items-center flex-column">
                                    <button class="btn btn-primary btn-sm" (click)="changeFirstname()">Change</button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <th>Last Name</th>
                            <td>
                                <div class="d-flex justify-content-center align-items-center flex-column">
                                    <input type="text" class="form-control form-control-sm mb-2" [(ngModel)]="newLastname">
                                </div>
                            </td>
                            <td>
                                <div class="d-flex justify-content-center align-items-center flex-column">
                                    <button class="btn btn-primary btn-sm" (click)="changeLastname()">Change</button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <th>Address</th>
                            <td>
                                <div class="d-flex justify-content-center align-items-center flex-column">
                                    <input type="text" class="form-control form-control-sm mb-2" [(ngModel)]="newAddress">
                                </div>
                            </td>
                            <td>
                                <div class="d-flex justify-content-center align-items-center flex-column">
                                    <button class="btn btn-primary btn-sm" (click)="changeAddress()">Change</button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <th>Contact</th>
                            <td>
                                <div class="d-flex justify-content-center align-items-center flex-column">
                                    <input type="text" class="form-control form-control-sm mb-2" [(ngModel)]="newContact">
                                </div>
                            </td>
                            <td>
                                <div class="d-flex justify-content-center align-items-center flex-column">
                                    <button class="btn btn-primary btn-sm" (click)="changeContact()">Change</button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <th>Email</th>
                            <td>
                                <div class="d-flex justify-content-center align-items-center flex-column">
                                    <input type="text" class="form-control form-control-sm mb-2" [(ngModel)]="newEmail">
                                </div>
                            </td>
                            <td>
                                <div class="d-flex justify-content-center align-items-center flex-column">
                                    <button class="btn btn-primary btn-sm" (click)="changeEmail()">Change</button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <th>Profile Picture</th>
                            <td>
                                <div class="d-flex justify-content-center align-items-center flex-column">
                                    <input type="file" class="form-control" id="profilePicture" name="profilePicture" (change)="onFileSelected($event)">
                                </div>
                            </td>
                            <td>
                                <div class="d-flex justify-content-center align-items-center flex-column">
                                    <button class="btn btn-primary btn-sm" (click)="changeProfilePicture()">Change</button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <th>Credit Card</th>
                            <td>
                                <div class="d-flex justify-content-center align-items-center flex-column">
                                    <input type="text" class="form-control form-control-sm mb-2" (input)="checkCardType()" [(ngModel)]="newCreditCard">
                                    <img *ngIf="cardType" [src]="cardType" alt="Card Type" width="60px">
                                </div>
                            </td>
                            <td>
                                <div class="d-flex justify-content-center align-items-center flex-column">
                                    <button class="btn btn-primary btn-sm" (click)="changeCreditCard()">Change</button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="mb-3" *ngIf="errorMessage">
                <div class="alert alert-danger" role="alert">
                    {{ errorMessage }}
                </div>
            </div>
        </div>
    </main>

    <footer class="fixed-bottom bg-primary text-white p-3 mt-auto text-center">
        <p class="mb-0">&copy; 2024 Garden Imagination</p>
    </footer>
</div>